{"ast":null,"code":"import _classCallCheck from \"E:\\\\Online Fashion Store\\\\online_fashion_store_angular\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";\nimport _createClass from \"E:\\\\Online Fashion Store\\\\online_fashion_store_angular\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";\nimport { ProductService } from \"src/app/product/services/product.service\";\nimport { CategoryService } from \"src/app/category/services/category.service\";\nimport { Category } from \"src/app/category/services/category\";\nimport { Product } from \"src/app/product/services/product\";\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Comments } from \"src/app/product/services/comments\";\nimport { DatePipe } from '@angular/common';\nimport { Sell } from \"src/app/sell/services/sell\";\nimport { SellService } from \"src/app/sell/services/sell.service\";\nimport { OrdersService } from \"src/app/orders/services/orders.service\";\nimport { Orders } from \"src/app/orders/services/orders\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/category/services/category.service\";\nimport * as i2 from \"src/app/product/services/product.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"src/app/sell/services/sell.service\";\nimport * as i6 from \"src/app/orders/services/orders.service\";\nimport * as i7 from \"../frontend-header/frontend-header.component\";\nimport * as i8 from \"@angular/forms\";\nimport * as i9 from \"../frontend-footer/frontend-footer.component\";\n\nfunction ProductDetailsComponent_div_45_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 25)(1, \"h4\");\n    i0.ɵɵtext(2, \"Enter Your Comment\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 26)(5, \"div\", 27)(6, \"input\", 28);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductDetailsComponent_div_45_Template_input_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      var ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.commentFrm.comments_title = $event;\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(7, \"div\", 26)(8, \"div\", 27)(9, \"textarea\", 29);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductDetailsComponent_div_45_Template_textarea_ngModelChange_9_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      var ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.commentFrm.comments_description = $event;\n    });\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(10, \"div\", 27)(11, \"button\", 30);\n    i0.ɵɵtext(12, \"Submit Comment\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    var ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.commentFrm.comments_title)(\"value\", ctx_r0.commentFrm.comments_title);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.commentFrm.comments_description)(\"value\", ctx_r0.commentFrm.comments_description);\n  }\n}\n\nfunction ProductDetailsComponent_div_46_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25)(1, \"a\", 31);\n    i0.ɵɵtext(2, \"Login to post comment\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction ProductDetailsComponent_div_50_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 32)(1, \"div\", 33)(2, \"div\", 34)(3, \"div\", 35);\n    i0.ɵɵelement(4, \"img\", 36);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 37)(6, \"div\", 38)(7, \"div\", 39)(8, \"h5\")(9, \"a\", 40);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"date\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(13, \"p\", 41);\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd()()()()();\n  }\n\n  if (rf & 2) {\n    var comment_r6 = ctx.$implicit;\n    var ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate1(\"src\", \"http://127.0.0.1:8080/uploads/\", ctx_r2.product.product_image_filename, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"Posted By : \", comment_r6.customer_name, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" On Date (\", i0.ɵɵpipeBind2(12, 4, comment_r6.comments_date, \"dd MMMM,yyyy\"), \") \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", comment_r6.comments_description, \" \");\n  }\n}\n\nexport var ProductDetailsComponent = /*#__PURE__*/(function () {\n  var ProductDetailsComponent = /*#__PURE__*/function () {\n    function ProductDetailsComponent(categoryService, productService, route, router, datePipe, sellService, orderService) {\n      _classCallCheck(this, ProductDetailsComponent);\n\n      this.categoryService = categoryService;\n      this.productService = productService;\n      this.route = route;\n      this.router = router;\n      this.datePipe = datePipe;\n      this.sellService = sellService;\n      this.orderService = orderService;\n      this.id = \"\";\n      this.order_id = 0;\n      this.user_level_id = window.sessionStorage.user_level_id;\n      this.user_id = window.sessionStorage.user_id;\n      this.product = new Product();\n      this.sellForm = new Sell();\n      this.orderForm = new Orders();\n      this.commentFrm = new Comments();\n      this.category = new Category();\n      this.formData = new FormData();\n      this.comment_date = new Date();\n    }\n\n    _createClass(ProductDetailsComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        this.id = this.route.snapshot.paramMap.get('id');\n\n        if (this.id) {\n          this.getProduct(this.id);\n        }\n\n        this.getCategoryList();\n        this.getProductList(0);\n        this.getAllComments(this.id);\n      }\n    }, {\n      key: \"onSubmit\",\n      value: function onSubmit() {\n        this.commentFrm.comments_product_id = this.id;\n        this.commentFrm.comments_user_id = window.sessionStorage.user_id;\n        this.commentFrm.comments_date = this.datePipe.transform(this.comment_date, 'yyyy-MM-dd');\n        this.save();\n      }\n    }, {\n      key: \"save\",\n      value: function save() {\n        var _this = this;\n\n        this.productService.saveComment(this.commentFrm).subscribe(function (data) {\n          console.log(data);\n\n          _this.getAllComments(_this.id);\n\n          _this.commentFrm.comments_title = \"\";\n          _this.commentFrm.comments_description = \"\";\n\n          _this.router.navigate(['/product-details/' + _this.id]);\n        }, function (err) {// this.errorMessage = err.error.message;\n          // this.isSignUpFailed = true;\n        });\n      }\n    }, {\n      key: \"getProduct\",\n      value: function getProduct(id) {\n        var _this2 = this;\n\n        this.productService.getProductDetails(id).subscribe(function (data) {\n          console.log(data);\n          _this2.product = data[0];\n        }, function (err) {\n          console.log(err);\n        });\n      }\n    }, {\n      key: \"getAllComments\",\n      value: function getAllComments(id) {\n        this.comments = this.productService.getAllComments(id);\n        console.log(this.comments);\n      }\n    }, {\n      key: \"getCategoryList\",\n      value: function getCategoryList() {\n        this.categories = this.categoryService.getAllCategories();\n      }\n    }, {\n      key: \"getProductList\",\n      value: function getProductList(id) {\n        this.productList = this.productService.getProductList(id);\n      }\n    }, {\n      key: \"addToCart\",\n      value: function addToCart() {\n        console.log(\"User ID : \" + this.user_id);\n\n        if (this.user_id) {\n          if (window.sessionStorage.order_id) {\n            this.saveSells();\n          } else {\n            this.saveOrder();\n          }\n        } else {\n          this.router.navigate(['/login']);\n        }\n      }\n    }, {\n      key: \"saveSells\",\n      value: function saveSells() {\n        this.sellForm.sell_product_id = this.product.product_id;\n        this.sellForm.sell_price_per_unit = this.product.product_cost;\n        this.sellForm.sell_order_id = window.sessionStorage.order_id;\n        this.sellForm.sell_units = 1;\n        this.sellForm.sell_total_cost = this.product.product_cost;\n        this.addItem();\n      }\n    }, {\n      key: \"addItem\",\n      value: function addItem() {\n        var _this3 = this;\n\n        console.log(this.sellForm);\n        this.sellService.createSell(this.sellForm).subscribe(function (data) {\n          console.log(data);\n\n          _this3.router.navigate(['/product-cart']); // this.isSuccessful = true;\n          // this.isSignUpFailed = false;\n          // this.sellForm.sell_units = 0;\n          // this.sellForm.sell_product_id = 0;\n          // this.getOrderItems(this.order_id);\n\n        }, function (err) {// this.errorMessage = err.error.message;\n          // this.isSignUpFailed = true;\n        });\n      }\n    }, {\n      key: \"saveOrder\",\n      value: function saveOrder() {\n        var myDate = new Date();\n        var todayDate = this.datePipe.transform(myDate, 'dd MMM yyyy hh:mm a');\n        console.log(\"Date = \" + todayDate);\n        this.orderForm.order_date = todayDate;\n        this.orderForm.order_customer_id = this.user_id;\n        this.orderForm.order_total = 0;\n        this.orderForm.order_status = \"In Progress\";\n        this.addOrder();\n      }\n    }, {\n      key: \"addOrder\",\n      value: function addOrder() {\n        var _this4 = this;\n\n        this.orderService.createOrders(this.orderForm).subscribe(function (data) {\n          console.log(data);\n          window.sessionStorage.order_id = data['order_id'];\n          console.log(\"Order ID : \" + window.sessionStorage.order_id);\n\n          _this4.saveSells();\n        }, function (err) {// this.errorMessage = err.error.message;\n          // this.isSignUpFailed = true;\n        });\n      }\n    }]);\n\n    return ProductDetailsComponent;\n  }();\n\n  ProductDetailsComponent.ɵfac = function ProductDetailsComponent_Factory(t) {\n    return new (t || ProductDetailsComponent)(i0.ɵɵdirectiveInject(i1.CategoryService), i0.ɵɵdirectiveInject(i2.ProductService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.DatePipe), i0.ɵɵdirectiveInject(i5.SellService), i0.ɵɵdirectiveInject(i6.OrdersService));\n  };\n\n  ProductDetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProductDetailsComponent,\n    selectors: [[\"app-product-details\"]],\n    features: [i0.ɵɵProvidersFeature([DatePipe])],\n    decls: 53,\n    vars: 12,\n    consts: [[1, \"myh\"], [1, \"container\"], [1, \"row\"], [1, \"col-xl-12\"], [1, \"text-center\"], [2, \"font-size\", \"21px\"], [1, \"product_area\", \"single-post-area\", 2, \"padding\", \"50px 0px\"], [1, \"container-fliud\"], [1, \"wrapper\", \"row\"], [1, \"preview\", \"col-md-6\"], [1, \"preview-pic\", \"tab-content\"], [\"id\", \"pic-1\", 1, \"tab-pane\", \"active\"], [3, \"src\"], [1, \"details\", \"col-md-6\"], [1, \"product-title\"], [1, \"product-description\", 2, \"height\", \"200px\", \"overflow\", \"scroll\"], [1, \"price\"], [1, \"vote\"], [1, \"action\"], [\"type\", \"button\", 1, \"add-to-cart\", \"btn\", \"btn-default\", 3, \"click\"], [1, \"col-lg-12\", \"posts-list\"], [\"ngNativeValidate\", \"\", \"action\", \"#\", \"id\", \"commentForm\", 1, \"form-contact\", \"comment_form\", 3, \"ngSubmit\"], [\"class\", \"comment-form\", 4, \"ngIf\"], [1, \"comments-area\"], [\"class\", \"comment-list\", 4, \"ngFor\", \"ngForOf\"], [1, \"comment-form\"], [1, \"col-12\"], [1, \"form-group\"], [\"name\", \"comments_title\", \"id\", \"comments_title\", \"type\", \"text\", \"placeholder\", \"Enter Title\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"value\", \"ngModelChange\"], [\"name\", \"comments_description\", \"id\", \"comments_description\", \"cols\", \"30\", \"rows\", \"9\", \"placeholder\", \"Write your comment\", \"required\", \"\", 1, \"form-control\", \"w-100\", 3, \"ngModel\", \"value\", \"ngModelChange\"], [\"type\", \"submit\", 1, \"button\", \"button-contactForm\", \"btn_1\", \"boxed-btn\"], [\"href\", \"/login\", 1, \"boxed-btn3\", 2, \"color\", \"#FFF !important\"], [1, \"comment-list\"], [1, \"single-comment\", \"justify-content-between\", \"d-flex\"], [1, \"user\", \"justify-content-between\", \"d-flex\"], [1, \"thumb\"], [\"alt\", \"\", 3, \"src\"], [1, \"desc\"], [1, \"d-flex\", \"justify-content-between\"], [1, \"d-flex\", \"align-items-center\"], [\"href\", \"#\"], [1, \"comment\"]],\n    template: function ProductDetailsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-frontend-header\");\n        i0.ɵɵelementStart(1, \"div\", 0)(2, \"div\", 1)(3, \"div\", 2)(4, \"div\", 3)(5, \"div\", 4)(6, \"h3\", 5);\n        i0.ɵɵtext(7);\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelementStart(8, \"section\", 6)(9, \"div\", 1)(10, \"div\", 7)(11, \"div\", 8)(12, \"div\", 9)(13, \"div\", 10)(14, \"div\", 11);\n        i0.ɵɵelement(15, \"img\", 12);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(16, \"div\", 13)(17, \"h3\", 14);\n        i0.ɵɵtext(18);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"p\", 15);\n        i0.ɵɵtext(20);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"h4\", 16);\n        i0.ɵɵtext(22, \"cost: \");\n        i0.ɵɵelementStart(23, \"span\");\n        i0.ɵɵtext(24);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(25, \"h4\", 16);\n        i0.ɵɵtext(26, \"company : \");\n        i0.ɵɵelementStart(27, \"span\");\n        i0.ɵɵtext(28);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(29, \"h4\", 16);\n        i0.ɵɵtext(30, \"category : \");\n        i0.ɵɵelementStart(31, \"span\");\n        i0.ɵɵtext(32);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(33, \"p\", 17)(34, \"strong\");\n        i0.ɵɵtext(35, \"91%\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(36, \" of buyers enjoyed this product! \");\n        i0.ɵɵelementStart(37, \"strong\");\n        i0.ɵɵtext(38, \"(87 votes)\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(39, \"div\", 18)(40, \"button\", 19);\n        i0.ɵɵlistener(\"click\", function ProductDetailsComponent_Template_button_click_40_listener() {\n          return ctx.addToCart();\n        });\n        i0.ɵɵtext(41, \"add to cart\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(42, \"div\", 2)(43, \"div\", 20)(44, \"form\", 21);\n        i0.ɵɵlistener(\"ngSubmit\", function ProductDetailsComponent_Template_form_ngSubmit_44_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵtemplate(45, ProductDetailsComponent_div_45_Template, 13, 4, \"div\", 22);\n        i0.ɵɵtemplate(46, ProductDetailsComponent_div_46_Template, 3, 0, \"div\", 22);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(47, \"div\", 23)(48, \"h4\");\n        i0.ɵɵtext(49, \"All Comments\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(50, ProductDetailsComponent_div_50_Template, 15, 7, \"div\", 24);\n        i0.ɵɵpipe(51, \"async\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelement(52, \"app-frontend-footer\");\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate(ctx.product.product_title);\n        i0.ɵɵadvance(8);\n        i0.ɵɵpropertyInterpolate1(\"src\", \"http://127.0.0.1:8080/uploads/\", ctx.product.product_image_filename, \"\", i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.product.product_title);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.product.product_description);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.product.product_cost);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.product.company_name);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.product.category_title);\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"ngIf\", ctx.user_level_id === \"2\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.user_level_id !== \"2\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(51, 10, ctx.comments));\n      }\n    },\n    directives: [i7.FrontendHeaderComponent, i8.NgControlStatusGroup, i8.NgForm, i4.NgIf, i8.DefaultValueAccessor, i8.RequiredValidator, i8.NgControlStatus, i8.NgModel, i4.NgForOf, i9.FrontendFooterComponent],\n    pipes: [i4.AsyncPipe, i4.DatePipe],\n    styles: [\"img[_ngcontent-%COMP%]{max-width:100%}.preview[_ngcontent-%COMP%]{display:flex;flex-direction:column}@media screen and (max-width: 996px){.preview[_ngcontent-%COMP%]{margin-bottom:20px}}.preview-pic[_ngcontent-%COMP%]{flex-grow:1}.preview-thumbnail.nav-tabs[_ngcontent-%COMP%]{border:none;margin-top:15px}.preview-thumbnail.nav-tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:18%;margin-right:2.5%}.preview-thumbnail.nav-tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;display:block}.preview-thumbnail.nav-tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:0;margin:0}.preview-thumbnail.nav-tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-of-type{margin-right:0}.tab-content[_ngcontent-%COMP%]{overflow:hidden}.tab-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;animation-name:opacity;animation-duration:.3s}.card[_ngcontent-%COMP%]{margin-top:50px;background:#eee;padding:3em;line-height:1.5em}@media screen and (min-width: 997px){.wrapper[_ngcontent-%COMP%]{display:flex}}.details[_ngcontent-%COMP%]{display:flex;flex-direction:column}.colors[_ngcontent-%COMP%]{flex-grow:1}.product-title[_ngcontent-%COMP%], .price[_ngcontent-%COMP%], .sizes[_ngcontent-%COMP%], .colors[_ngcontent-%COMP%]{text-transform:UPPERCASE;font-weight:700}.checked[_ngcontent-%COMP%], .price[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#ff9f1a}.product-title[_ngcontent-%COMP%], .rating[_ngcontent-%COMP%], .product-description[_ngcontent-%COMP%], .price[_ngcontent-%COMP%], .vote[_ngcontent-%COMP%], .sizes[_ngcontent-%COMP%]{margin-bottom:15px}.product-title[_ngcontent-%COMP%]{margin-top:0}.size[_ngcontent-%COMP%]{margin-right:10px}.size[_ngcontent-%COMP%]:first-of-type{margin-left:40px}.color[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;margin-right:10px;height:2em;width:2em;border-radius:2px}.color[_ngcontent-%COMP%]:first-of-type{margin-left:20px}.add-to-cart[_ngcontent-%COMP%], .like[_ngcontent-%COMP%]{background:#ff9f1a;padding:1.2em 1.5em;border:none;text-transform:UPPERCASE;font-weight:700;color:#fff;transition:background .3s ease}.add-to-cart[_ngcontent-%COMP%]:hover, .like[_ngcontent-%COMP%]:hover{background:#b36800;color:#fff}.not-available[_ngcontent-%COMP%]{text-align:center;line-height:2em}.not-available[_ngcontent-%COMP%]:before{font-family:fontawesome;content:\\\"\\\\f00d\\\";color:#fff}.orange[_ngcontent-%COMP%]{background:#ff9f1a}.green[_ngcontent-%COMP%]{background:#85ad00}.blue[_ngcontent-%COMP%]{background:#0076ad}.tooltip-inner[_ngcontent-%COMP%]{padding:1.3em}@keyframes opacity{0%{opacity:0;transform:scale(3)}to{opacity:1;transform:scale(1)}}\"]\n  });\n  return ProductDetailsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}